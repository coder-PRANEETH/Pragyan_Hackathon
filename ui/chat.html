<!DOCTYPE html>
<html lang="en">
<head>
            <style>
                .toggle-switch {
                    position: fixed;
                    top: 24px;
                    right: 24px;
                    z-index: 50;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    background: rgba(31,41,55,0.7);
                    border-radius: 9999px;
                    padding: 0.5rem 1.25rem;
                    box-shadow: 0 4px 24px 0 rgba(129,140,248,0.10);
                    transition: background 0.3s;
                }
                .light-mode .toggle-switch {
                    background: rgba(244,114,182,0.15);
                }
                .toggle-slider {
                    width: 48px;
                    height: 28px;
                    background: #818cf8;
                    border-radius: 9999px;
                    position: relative;
                    cursor: pointer;
                    transition: background 0.3s;
                    overflow: hidden;
                    box-shadow: 0 2px 8px rgba(129,140,248,0.10);
                }
                .toggle-slider.light {
                    background: #f472b6;
                }
                .toggle-knob {
                    position: absolute;
                    top: 3px;
                    left: 3px;
                    width: 22px;
                    height: 22px;
                    background: #fff;
                    border-radius: 50%;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
                    transition: left 0.3s cubic-bezier(.4,0,.2,1), background 0.3s, box-shadow 0.2s;
                }
                .toggle-slider.light .toggle-knob {
                    left: 23px;
                    background: #fffbe9;
                }
                .toggle-slider:active .toggle-knob {
                    box-shadow: 0 0 0 8px rgba(129,140,248,0.15);
                    transition: box-shadow 0.2s;
                }
                .toggle-knob.ripple {
                    animation: ripple-effect 0.4s;
                }
                @keyframes ripple-effect {
                    0% { box-shadow: 0 0 0 0 rgba(129,140,248,0.25); }
                    100% { box-shadow: 0 0 0 16px rgba(129,140,248,0); }
                }
                .toggle-emoji {
                    font-size: 1.3rem;
                    transition: color 0.3s, transform 0.3s;
                }
                .toggle-emoji.active {
                    transform: scale(1.2) rotate(-10deg);
                    color: #fbbf24;
                    filter: drop-shadow(0 2px 8px #fbbf24aa);
                }
            </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - Dashboard Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }
        .stat-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        /* Modern scrollbar styling */
        .modern-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .modern-scroll::-webkit-scrollbar-track {
            background: transparent;
            border-radius: 10px;
        }
        .modern-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #818cf8 0%, #6366f1 100%);
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .modern-scroll::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #a5b4fc 0%, #818cf8 100%);
            box-shadow: 0 0 10px rgba(129, 140, 248, 0.5);
        }
        /* Firefox scrollbar */
        .modern-scroll {
            scrollbar-color: #818cf8 transparent;
            scrollbar-width: thin;
        }
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
    </style>
</head>
<body>
            <!-- Light/Dark Mode Toggle Switch -->
            <div class="toggle-switch" id="toggle-switch">
                <span class="toggle-emoji" id="toggle-emoji">üåô</span>
                <div class="toggle-slider" id="toggle-slider">
                    <div class="toggle-knob"></div>
                </div>
                <span class="toggle-emoji" id="toggle-emoji-sun">‚òÄÔ∏è</span>
            </div>
            <script>
            // Light/Dark Mode Toggle
            const toggleSwitch = document.getElementById('toggle-switch');
            const toggleSlider = document.getElementById('toggle-slider');
            const body = document.body;
            const emojiMoon = document.getElementById('toggle-emoji');
            const emojiSun = document.getElementById('toggle-emoji-sun');
            function setTheme(isLight) {
                if (isLight) {
                    body.classList.add('light-mode');
                    toggleSlider.classList.add('light');
                    emojiMoon.style.opacity = '0.4';
                    emojiSun.style.opacity = '1';
                } else {
                    body.classList.remove('light-mode');
                    toggleSlider.classList.remove('light');
                    emojiMoon.style.opacity = '1';
                    emojiSun.style.opacity = '0.4';
                }
                // Update all cards and text for theme
                const textEls = document.querySelectorAll('body, p, span, label, h1, h2, h3, h4, h5, h6, .stat-card, .content-card');
                textEls.forEach(el => {
                    if (isLight) {
                        el.style.color = '#312e81';
                        el.style.background = '';
                    } else {
                        el.style.color = '';
                        el.style.background = '';
                    }
                });
            }
            toggleSwitch.addEventListener('click', function() {
                const isLight = !body.classList.contains('light-mode');
                setTheme(isLight);
                localStorage.setItem('theme', isLight ? 'light' : 'dark');
                // Animate knob ripple
                const knob = toggleSlider.querySelector('.toggle-knob');
                knob.classList.remove('ripple');
                void knob.offsetWidth; // force reflow
                knob.classList.add('ripple');
                // Animate emoji
                if (isLight) {
                    emojiSun.classList.add('active');
                    emojiMoon.classList.remove('active');
                } else {
                    emojiMoon.classList.add('active');
                    emojiSun.classList.remove('active');
                }
                setTimeout(() => {
                    knob.classList.remove('ripple');
                }, 400);
            });
            // Set initial emoji effect
            if (body.classList.contains('light-mode')) {
                emojiSun.classList.add('active');
                emojiMoon.classList.remove('active');
            } else {
                emojiMoon.classList.add('active');
                emojiSun.classList.remove('active');
            }
            </script>
    <!-- Floating Profile and Hamburger Menu -->
    <div class="fixed top-6 left-6 z-50 flex items-center gap-4">
        <button id="hamburger-btn" class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-3 rounded-full shadow-lg hover:scale-110 transition duration-300">
            <svg id="hamburger-icon" class="w-7 h-7 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
        <div class="relative">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Profile" class="w-12 h-12 rounded-full border-4 border-white shadow-lg hover:scale-110 transition duration-300" />
        </div>
    </div>

    <!-- Animated Hamburger Menu Drawer -->
    <div id="drawer-menu" class="fixed top-0 left-0 w-64 h-full bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 shadow-2xl z-40 transform -translate-x-full transition-transform duration-300 flex flex-col pt-20 px-6">
        <a href="olduserdb.html" class="mb-4 text-white text-lg font-semibold hover:bg-white/10 rounded-lg px-4 py-2 transition">Dashboard</a>
        <a href="#" class="mb-4 text-white text-lg font-semibold hover:bg-white/10 rounded-lg px-4 py-2 transition">Analytics</a>
        <a href="#" class="mb-4 text-white text-lg font-semibold hover:bg-white/10 rounded-lg px-4 py-2 transition">Reports</a>
        <a href="#" class="mb-4 text-white text-lg font-semibold hover:bg-white/10 rounded-lg px-4 py-2 transition">Settings</a>
        <a href="#" class="mt-auto text-white text-base font-medium hover:bg-white/10 rounded-lg px-4 py-2 transition">Sign out</a>
    </div>

    <!-- Hero Section -->
    <section class="w-full flex flex-col items-center justify-center py-12">
        <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2 tracking-tight drop-shadow-lg">Chat Assistant</h1>
        <p class="text-lg md:text-xl text-indigo-200 mb-8">Have a conversation with your dashboard assistant</p>
    </section>

    <!-- Glassmorphism Chat Box -->
    <div class="flex flex-col items-center justify-center w-full px-4">
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8 max-w-2xl w-full flex flex-col">
            <!-- Messages Container -->
            <div id="chat-messages-full" class="flex-1 overflow-y-auto modern-scroll space-y-4 mb-6 pr-4" style="min-height:180px;">
                <div class="flex justify-start">
                    <div class="bg-gray-800 text-gray-200 px-4 py-2 rounded-lg max-w-md">
                        <p class="text-sm">Hi! I'm your assistant. How can I help you today?</p>
                    </div>
                </div>
            </div>
            <!-- Input Area -->
            <div class="border-t border-white/20 pt-4">
                <div class="flex items-center justify-center">
                    <div class="flex w-full max-w-xl mx-auto items-center bg-gray-900 rounded-full px-4 py-2 shadow-lg gap-2">
                        <input id="file-upload" type="file" class="hidden" />
                        <button id="plus-btn" class="flex items-center justify-center text-gray-400 hover:text-white bg-transparent p-0 m-0 focus:outline-none" type="button">
                            <span style="font-size:1.3em;">‚ûï</span>
                        </button>
                        <input id="full-chat-input" type="text" placeholder="Ask anything" class="flex-1 bg-transparent text-white placeholder-gray-400 rounded-full px-3 py-2 border-none focus:outline-none font-medium" />
                        <button id="voice-btn" class="flex items-center justify-center text-gray-400 hover:text-white bg-transparent p-0 m-0 focus:outline-none">
                            <span style="font-size:1em;">üé§</span>
                        </button>
                        <button id="full-send-btn" class="flex items-center justify-center text-gray-400 hover:text-white bg-transparent p-0 m-0 focus:outline-none">
                            <svg viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                <path d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 L4.13399899,1.16414422 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.837654326,3.0486314 1.15159189,3.99021575 L3.03521743,10.4312088 C3.03521743,10.5883061 3.19218622,10.7454035 3.50612381,10.7454035 L16.6915026,11.5308905 C16.6915026,11.5308905 17.1624089,11.5308905 17.1624089,12.0021827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="w-full mt-12">
        <div class="max-w-2xl mx-auto px-4 py-8 flex flex-col items-center">
            <div class="flex space-x-6 mb-4">
                <a href="#" class="text-white/70 hover:text-white transition">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M8.29 20v-7.1h-2.37V9.4h2.37V7.57c0-2.33 1.43-3.6 3.5-3.6 1 0 1.85.07 2.1.1v2.43h-1.44c-1.13 0-1.35.54-1.35 1.32V9.4h2.7l-.35 3.5h-2.35V20h-2.88z" />
                    </svg>
                </a>
                <a href="#" class="text-white/70 hover:text-white transition">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2s9 5 20 5a9.5 9.5 0 00-9-5.5c4.75 2.25 10.42.2 12.6-7.14a4.5 4.5 0 00.08-.5" />
                    </svg>
                </a>
                <a href="#" class="text-white/70 hover:text-white transition">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.834 8.207 11.437.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v 3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                    </svg>
                </a>
            </div>
            <div class="text-white/60 text-sm">
                <p>&copy; 2026 Dashboard Analytics. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Hamburger menu drawer functionality
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const drawerMenu = document.getElementById('drawer-menu');
        let drawerOpen = false;
        hamburgerBtn.addEventListener('click', function() {
            drawerOpen = !drawerOpen;
            drawerMenu.style.transform = drawerOpen ? 'translateX(0)' : 'translateX(-100%)';
        });

        // Close drawer when clicking outside
        document.addEventListener('click', function(event) {
            if (drawerOpen && !drawerMenu.contains(event.target) && !hamburgerBtn.contains(event.target)) {
                drawerOpen = false;
                drawerMenu.style.transform = 'translateX(-100%)';
            }
        });

        // Chat Functionality
        const chatMessagesContainer = document.getElementById('chat-messages-full');
        const fullChatInput = document.getElementById('full-chat-input');
        const fullSendBtn = document.getElementById('full-send-btn');
        const plusBtn = document.getElementById('plus-btn');
        const fileUpload = document.getElementById('file-upload');
        const voiceBtn = document.getElementById('voice-btn');
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;

        // Voice button triggers recording
        voiceBtn.addEventListener('click', async function() {
            if (!isRecording) {
                // Start recording
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    audioChunks = [];
                    mediaRecorder.ondataavailable = event => {
                        if (event.data.size > 0) audioChunks.push(event.data);
                    };
                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                        // You can handle the audioBlob here (e.g., upload, playback, etc.)
                        // For demo: show a message in chat
                        handleChatMessage('Voice message recorded!');
                    };
                    mediaRecorder.start();
                    isRecording = true;
                    voiceBtn.style.color = '#f87171'; // highlight while recording
                } catch (err) {
                    alert('Microphone access denied or not available.');
                }
            } else {
                // Stop recording
                mediaRecorder.stop();
                isRecording = false;
                voiceBtn.style.color = '';
            }
        });

        // Plus button triggers file upload
        plusBtn.addEventListener('click', function() {
            fileUpload.click();
        });

        // Get initial message from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const initialMessage = urlParams.get('message');

        if (initialMessage) {
            handleChatMessage(initialMessage);
            fullChatInput.focus();
        }

        fullSendBtn.addEventListener('click', function() {
            const message = fullChatInput.value.trim();
            if (message) {
                handleChatMessage(message);
                fullChatInput.value = '';
                fullChatInput.focus();
            }
        });

        fullChatInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                const message = fullChatInput.value.trim();
                if (message) {
                    handleChatMessage(message);
                    fullChatInput.value = '';
                }
            }
        });

        function handleChatMessage(userMessage) {
            // Add user message
            const userDiv = document.createElement('div');
            userDiv.className = 'flex justify-end';
            userDiv.innerHTML = `<div class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg max-w-md shadow-lg">
                <p class="text-sm">${userMessage}</p>
            </div>`;
            chatMessagesContainer.appendChild(userDiv);

            // Simulate bot response
            setTimeout(() => {
                const botDiv = document.createElement('div');
                botDiv.className = 'flex justify-start';
                
                let botResponse = '';
                const lowerMessage = userMessage.toLowerCase();

                if (lowerMessage.includes('health') || lowerMessage.includes('score')) {
                    botResponse = 'Your overall health score is 77.6% which is excellent! Keep up the great work. You can adjust your health metrics in the dashboard to see real-time changes.';
                } else if (lowerMessage.includes('dashboard') || lowerMessage.includes('home')) {
                    botResponse = 'You can navigate back to the main dashboard by clicking the Dashboard link in the hamburger menu.';
                } else if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
                    botResponse = 'I can help you with health metrics, analytics, reports, and navigation. Feel free to ask me anything!';
                } else if (lowerMessage.includes('activity') || lowerMessage.includes('recent')) {
                    botResponse = 'Your recent activity shows various user registrations, payments, and system updates. Check the Recent Activity panel to see all your latest events.';
                } else if (lowerMessage.includes('settings') || lowerMessage.includes('preference')) {
                    botResponse = 'You can access settings from the hamburger menu. Click on Settings to customize your preferences.';
                } else {
                    botResponse = 'That\'s a great question! I\'m here to help you navigate the dashboard and understand your health metrics. Is there anything specific you\'d like to know?';
                }

                botDiv.innerHTML = `<div class="bg-gray-800 text-gray-200 px-4 py-2 rounded-lg max-w-md shadow-lg">
                    <p class="text-sm">${botResponse}</p>
                </div>`;
                chatMessagesContainer.appendChild(botDiv);
                chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
            }, 500);

            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
        }
    </script>
</body>
</html>
