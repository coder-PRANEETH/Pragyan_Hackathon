<!DOCTYPE html>
<html lang="en">
<head>
        <style>
                /* Animated background gradient hover effect */
                body::before {
                  content: '';
                  position: fixed;
                  top: 0; left: 0; right: 0; bottom: 0;
                  z-index: 0;
                  pointer-events: none;
                  opacity: 0;
                  transition: opacity 0.5s, background 0.5s;
                  background: radial-gradient(circle at var(--mouse-x, 50vw) var(--mouse-y, 50vh), rgba(129,140,248,0.18) 0%, rgba(244,114,182,0.12) 40%, transparent 80%);
                }
                body.bg-glow::before {
                  opacity: 1;
                }
          .toggle-switch {
            position: fixed;
            top: 24px;
            left: 24px;
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(31,41,55,0.7);
            border-radius: 9999px;
            padding: 0.5rem 1.25rem;
            box-shadow: 0 4px 24px 0 rgba(129,140,248,0.10);
            transition: background 0.3s;
          }
          .light-mode .toggle-switch {
            background: rgba(244,114,182,0.15);
          }
          .toggle-slider {
            width: 48px;
            height: 28px;
            background: #818cf8;
            border-radius: 9999px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(129,140,248,0.10);
          }
          .toggle-slider.light {
            background: #f472b6;
          }
          .toggle-knob {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
            transition: left 0.3s cubic-bezier(.4,0,.2,1), background 0.3s, box-shadow 0.2s;
          }
          .toggle-slider.light .toggle-knob {
            left: 23px;
            background: #fffbe9;
          }
          .toggle-slider:active .toggle-knob {
            box-shadow: 0 0 0 8px rgba(129,140,248,0.15);
            transition: box-shadow 0.2s;
          }
          .toggle-knob.ripple {
            animation: ripple-effect 0.4s;
          }
          @keyframes ripple-effect {
            0% { box-shadow: 0 0 0 0 rgba(129,140,248,0.25); }
            100% { box-shadow: 0 0 0 16px rgba(129,140,248,0); }
          }
          .toggle-emoji {
            font-size: 1.3rem;
            transition: color 0.3s, transform 0.3s;
          }
          .toggle-emoji.active {
            transform: scale(1.2) rotate(-10deg);
            color: #fbbf24;
            filter: drop-shadow(0 2px 8px #fbbf24aa);
          }
        </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - User Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        position: relative;
        overflow-x: hidden;
        transition: background 0.5s;
      }
      body.light-mode {
        background: linear-gradient(135deg, #f9fafb 0%, #f3e8ff 100%);
      }
      .light-mode .bg-squares .square {
        background: linear-gradient(135deg, #f472b6 0%, #818cf8 100%);
        border: 1px solid rgba(244, 114, 182, 0.3);
      }
      .light-mode .square:hover {
        background: linear-gradient(135deg, #f9a8d4 0%, #818cf8 100%);
        box-shadow: 0 0 30px rgba(244, 114, 182, 0.8);
      }
      .light-mode nav, .light-mode .mx-auto, .light-mode .stat-card, .light-mode .content-card, .light-mode .backdrop-blur-xl, .light-mode .bg-white\/10, .light-mode .backdrop-blur-lg {
        background: rgba(255,255,255,0.85) !important;
        color: #312e81 !important;
        border-color: #e0e7ff !important;
      }
      .light-mode .stat-card, .light-mode .content-card {
        box-shadow: 0 8px 32px 0 rgba(244,114,182,0.10), 0 2px 8px 0 rgba(129,140,248,0.10);
      }
      .light-mode h1, .light-mode h2, .light-mode h3, .light-mode h4, .light-mode h5, .light-mode h6 {
        color: #312e81 !important;
      }
      .light-mode p, .light-mode span, .light-mode label, .light-mode .text-white, .light-mode .text-gray-200, .light-mode .text-gray-400, .light-mode .text-gray-500 {
        color: #312e81 !important;
      }
      .light-mode .border-white\/20, .light-mode .border-gray-700\/30 {
        border-color: #e0e7ff !important;
      }
      .light-mode .bg-gray-700\/30, .light-mode .bg-gray-800, .light-mode .bg-gray-900 {
        background: #f3e8ff !important;
      }
      .light-mode .bg-white\/10 {
        background: rgba(244,114,182,0.08) !important;
      }
      .light-mode .rounded-2xl {
        box-shadow: 0 4px 24px 0 rgba(244,114,182,0.10), 0 2px 8px 0 rgba(129,140,248,0.10);
      }
      .light-mode .bg-gradient-to-tr {
        background: linear-gradient(135deg, #f472b6 0%, #818cf8 100%) !important;
      }
      .light-mode .bg-gradient-to-r {
        background: linear-gradient(90deg, #f472b6 0%, #818cf8 100%) !important;
      }
      .light-mode .bg-gradient-to-r.from-indigo-500.to-indigo-600 {
        background: linear-gradient(90deg, #f472b6 0%, #818cf8 100%) !important;
      }
      .light-mode .bg-indigo-500\/20, .light-mode .bg-green-500\/20, .light-mode .bg-purple-500\/20, .light-mode .bg-yellow-500\/20, .light-mode .bg-blue-500\/20, .light-mode .bg-pink-500\/20 {
        background: #f3e8ff !important;
      }
      .light-mode .text-indigo-400, .light-mode .text-green-400, .light-mode .text-purple-400, .light-mode .text-yellow-400, .light-mode .text-blue-400, .light-mode .text-pink-400 {
        color: #a21caf !important;
      }
      .light-mode .text-red-400 {
        color: #be123c !important;
      }
      .light-mode .text-green-400 {
        color: #059669 !important;
      }
      .light-mode .text-blue-400 {
        color: #2563eb !important;
      }
      .light-mode .text-purple-400 {
        color: #7c3aed !important;
      }
      .light-mode .text-yellow-400 {
        color: #eab308 !important;
      }
      .light-mode .text-pink-400 {
        color: #db2777 !important;
      }
      .light-mode .text-orange-400 {
        color: #f59e42 !important;
      }
      .light-mode .bg-indigo-500\/20, .light-mode .bg-green-500\/20, .light-mode .bg-purple-500\/20, .light-mode .bg-yellow-500\/20, .light-mode .bg-blue-500\/20, .light-mode .bg-pink-500\/20 {
        background: #f3e8ff !important;
      }
      .light-mode .bg-gradient-to-r.from-indigo-500.to-indigo-600 {
        background: linear-gradient(90deg, #f472b6 0%, #818cf8 100%) !important;
      }


        /* Animated background squares */
        .bg-squares {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.15;
        }

        .square {
          position: absolute;
          background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%);
          border: 1px solid rgba(129, 140, 248, 0.3);
          border-radius: 0.6rem;
          transition: all 0.22s cubic-bezier(.4,0,.2,1);
          box-shadow: 0 0 20px rgba(99, 102, 241, 0);
          will-change: transform, box-shadow, background, opacity, filter;
          filter: hue-rotate(0deg) brightness(1);
        }
        .square.pulse {
          animation: square-pulse 0.45s cubic-bezier(.4,0,.2,1);
        }
        @keyframes square-pulse {
          0% { box-shadow: 0 0 0 0 rgba(244,114,182,0.18); }
          60% { box-shadow: 0 0 32px 16px rgba(244,114,182,0.22); }
          100% { box-shadow: 0 0 0 0 rgba(244,114,182,0); }
        }

        /* Bring content above squares */
        nav, .mx-auto {
            position: relative;
            z-index: 1;
        }

        .stat-card, .content-card {
          transition: transform 0.25s cubic-bezier(.4,0,.2,1), box-shadow 0.25s cubic-bezier(.4,0,.2,1), border 0.25s;
        }
        .stat-card:hover, .content-card:hover {
          transform: translateY(-8px) scale(1.04) rotate(-1deg);
          box-shadow: 0 16px 40px 0 rgba(129,140,248,0.25), 0 2px 8px 0 rgba(244,114,182,0.18);
          border: 2px solid #818cf8;
          z-index: 2;
        }
        /* Modern scrollbar styling */
        .modern-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .modern-scroll::-webkit-scrollbar-track {
            background: transparent;
            border-radius: 10px;
        }
        .modern-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #818cf8 0%, #6366f1 100%);
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .modern-scroll::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #a5b4fc 0%, #818cf8 100%);
            box-shadow: 0 0 10px rgba(129, 140, 248, 0.5);
        }
        /* Firefox scrollbar */
        .modern-scroll {
            scrollbar-color: #818cf8 transparent;
            scrollbar-width: thin;
        }
    </style>
</head>
<body>
                  <!-- Animated Background Squares -->
                  <div class="bg-squares" id="bg-squares"></div>
                <!-- Light/Dark Mode Toggle Switch -->
                <div class="toggle-switch" id="toggle-switch" title="Toggle light/dark mode">
                  <span class="toggle-emoji" id="toggle-emoji">üåô</span>
                  <div class="toggle-slider" id="toggle-slider">
                    <div class="toggle-knob" id="toggle-knob"></div>
                  </div>
                  <span class="toggle-emoji" id="toggle-emoji-sun">‚òÄÔ∏è</span>
                </div>
                <script>
                        // THEME TOGGLE LOGIC (deduplicated, robust)
                        const toggleSwitch = document.getElementById('toggle-switch');
                        const toggleSlider = document.getElementById('toggle-slider');
                        const toggleKnob = document.getElementById('toggle-knob');
                        const body = document.body;
                        const emojiMoon = document.getElementById('toggle-emoji');
                        const emojiSun = document.getElementById('toggle-emoji-sun');

                        function setTheme(isLight) {
                          if (isLight) {
                            body.classList.add('light-mode');
                            toggleSlider.classList.add('light');
                            emojiMoon.style.opacity = '0.4';
                            emojiSun.style.opacity = '1';
                            emojiSun.classList.add('active');
                            emojiMoon.classList.remove('active');
                          } else {
                            body.classList.remove('light-mode');
                            toggleSlider.classList.remove('light');
                            emojiMoon.style.opacity = '1';
                            emojiSun.style.opacity = '0.4';
                            emojiMoon.classList.add('active');
                            emojiSun.classList.remove('active');
                          }
                          // Update all cards and text for theme
                          const textEls = document.querySelectorAll('body, p, span, label, h1, h2, h3, h4, h5, h6, .stat-card, .content-card');
                          textEls.forEach(el => {
                            if (isLight) {
                              el.style.color = '#312e81';
                              el.style.background = '';
                            } else {
                              el.style.color = '';
                              el.style.background = '';
                            }
                          });
                        }

                        toggleSwitch.addEventListener('click', function() {
                          const isLight = !body.classList.contains('light-mode');
                          setTheme(isLight);
                          localStorage.setItem('theme', isLight ? 'light' : 'dark');
                          // Animate knob ripple
                          if (toggleKnob) {
                            toggleKnob.classList.remove('ripple');
                            void toggleKnob.offsetWidth;
                            toggleKnob.classList.add('ripple');
                            setTimeout(() => toggleKnob.classList.remove('ripple'), 400);
                          }
                        });

                        // On load, set theme from localStorage or default
                        if (localStorage.getItem('theme') === 'light') {
                          setTheme(true);
                        } else {
                          setTheme(false);
                        }
                        // Animated packed squares background effect
                        const bgSquares = document.getElementById('bg-squares');
                        const squareGrid = [];
                        function createSquareGrid() {
                          const cols = 14;
                          const rows = 8;
                          const w = window.innerWidth / cols;
                          const h = window.innerHeight / rows;
                          for (let i = 0; i < cols; i++) {
                            for (let j = 0; j < rows; j++) {
                              const square = document.createElement('div');
                              square.className = 'square';
                              square.style.left = (i * w) + 'px';
                              square.style.top = (j * h) + 'px';
                              square.style.width = w + 'px';
                              square.style.height = h + 'px';
                              bgSquares.appendChild(square);
                              squareGrid.push({ element: square, x: i * w + w / 2, y: j * h + h / 2 });
                            }
                          }
                        }
                        createSquareGrid();

                        document.addEventListener('mousemove', function(e) {
                          const mouseX = e.clientX;
                          const mouseY = e.clientY + window.scrollY;
                          squareGrid.forEach(item => {
                            const dx = mouseX - item.x;
                            const dy = mouseY - item.y;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            const maxDistance = 140;
                            const influence = Math.max(0, 1 - distance / maxDistance);
                            // Dramatic scale and color shift
                            item.element.style.transform = `scale(${1 + influence * 0.7})`;
                            item.element.style.opacity = 0.10 + influence * 0.7;
                            item.element.style.filter = `hue-rotate(${influence * 120}deg) brightness(${1 + influence * 0.25})`;
                            if (influence > 0.18) {
                              item.element.style.boxShadow = `0 0 ${24 + influence * 40}px 0 rgba(244,114,182,${0.18 + influence * 0.5})`;
                              item.element.style.background = 'linear-gradient(135deg, #f472b6 0%, #818cf8 100%)';
                              // Pulse effect when very close
                              if (influence > 0.7 && !item.element.classList.contains('pulse')) {
                                item.element.classList.add('pulse');
                                setTimeout(() => item.element.classList.remove('pulse'), 450);
                              }
                            } else {
                              item.element.style.boxShadow = '0 0 20px rgba(99, 102, 241, 0)';
                              item.element.style.background = 'linear-gradient(135deg, #818cf8 0%, #6366f1 100%)';
                              item.element.classList.remove('pulse');
                            }
                          });
                        });
                        window.addEventListener('resize', function() {
                          bgSquares.innerHTML = '';
                          squareGrid.length = 0;
                          createSquareGrid();
                        });
                        // Animated background glow effect on page hover
                        document.addEventListener('mousemove', function(e) {
                          document.body.classList.add('bg-glow');
                          document.body.style.setProperty('--mouse-x', e.clientX + 'px');
                          document.body.style.setProperty('--mouse-y', e.clientY + window.scrollY + 'px');
                        });
                        document.addEventListener('mouseleave', function() {
                          document.body.classList.remove('bg-glow');
                        });
                    // Enhance background squares with hover/packed effect
                    // (Assumes bgSquares, squareGrid, and createSquareGrid already exist)
                    // (bg-hover logic removed; replaced by new effect above)
                // Light/Dark Mode Toggle
                </script>
            <script>
            // Light/Dark Mode Toggle
            </script>
        <script>
        // Light/Dark Mode Toggle
        </script>
    <!-- Animated Background Squares -->
    <div class="bg-squares" id="bg-squares"></div>


    <!-- Hero Section -->
    <section class="relative z-10 flex flex-col items-center justify-center text-center py-16">
      <div class="backdrop-blur-xl bg-white/10 rounded-3xl shadow-2xl px-8 py-10 max-w-2xl mx-auto border border-white/20 animate-fade-in">
        <div class="flex flex-col items-center gap-4">
          <span class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 shadow-lg animate-bounce-slow">
            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 11c0-1.657-1.343-3-3-3s-3 1.343-3 3 1.343 3 3 3 3-1.343 3-3zm0 0c0-1.657 1.343-3 3-3s3 1.343 3 3-1.343 3-3 3-3-1.343-3-3zm0 0v2m0 4h.01"/></svg>
          </span>
          <h1 class="text-4xl font-extrabold text-white drop-shadow-lg">Welcome Back!</h1>
          <p class="text-lg text-gray-200 max-w-xl">Here's what's happening with your account today. Enjoy a beautiful, modern dashboard experience.</p>
        </div>
      </div>
    </section>

<!-- Floating Profile Button -->
<div class="fixed top-6 right-6 z-30">
  <div class="relative group">
    <button id="profile-btn" class="flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 shadow-xl border-4 border-white/30 hover:scale-110 transition-transform duration-300 focus:outline-none">
      <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="" class="w-10 h-10 rounded-full border-2 border-white/40" />
    </button>
    <div id="profile-menu" class="hidden absolute right-0 mt-2 w-48 origin-top-right rounded-xl bg-white/90 shadow-2xl ring-1 ring-black/10 backdrop-blur-lg py-2 z-40">
      <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-100 rounded">Your profile</a>
      <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-100 rounded">Settings</a>
      <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-100 rounded">Sign out</a>
    </div>
  </div>
</div>

<!-- Animated Hamburger Menu Button -->
<div class="fixed top-6 left-6 z-30 sm:hidden">
  <button id="mobile-menu-btn" class="relative w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-tr from-pink-500 via-purple-500 to-indigo-500 shadow-xl border-4 border-white/30 group focus:outline-none transition-transform duration-300 hover:scale-110">
    <span class="sr-only">Open main menu</span>
    <div class="space-y-2 transition-all duration-300">
      <span class="block h-1 w-8 bg-white rounded-full transition-transform duration-300 group-[.open]:rotate-45 group-[.open]:translate-y-2"></span>
      <span class="block h-1 w-8 bg-white rounded-full transition-all duration-300 group-[.open]:opacity-0"></span>
      <span class="block h-1 w-8 bg-white rounded-full transition-transform duration-300 group-[.open]:-rotate-45 group-[.open]:-translate-y-2"></span>
    </div>
  </button>
  <div id="mobile-menu" class="hidden absolute left-0 mt-4 w-56 rounded-2xl bg-white/90 shadow-2xl ring-1 ring-black/10 backdrop-blur-lg py-4 z-40">
    <a href="#" aria-current="page" class="block px-6 py-3 text-lg font-bold text-indigo-700 hover:bg-indigo-100 rounded">Dashboard</a>
    <a href="#" class="block px-6 py-3 text-lg text-gray-700 hover:bg-indigo-100 rounded">Analytics</a>
    <a href="#" class="block px-6 py-3 text-lg text-gray-700 hover:bg-indigo-100 rounded">Reports</a>
    <a href="#" class="block px-6 py-3 text-lg text-gray-700 hover:bg-indigo-100 rounded">Settings</a>
  </div>
</div>

<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
  <!-- Header -->
  <!-- ...existing code... -->

  <!-- Health Statistics Cards -->
  <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-12">
    <!-- Card 1: Blood Pressure Readings -->
    <div class="stat-card bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Blood Pressure <span class="ml-1">ü©∫</span></p>
          <p class="text-white text-3xl font-bold mt-2">120/80</p>
          <p class="text-blue-400 text-xs mt-2">Normal</p>
        </div>
        <div class="bg-blue-500/20 rounded-lg p-3 flex items-center justify-center text-2xl">ü©∫</div>
      </div>
    </div>

    <!-- Card 2: Heart Rate -->
    <div class="stat-card bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Heart Rate <span class="ml-1">‚ù§Ô∏è</span></p>
          <p class="text-white text-3xl font-bold mt-2">76 bpm</p>
          <p class="text-green-400 text-xs mt-2">Good</p>
        </div>
        <div class="bg-green-500/20 rounded-lg p-3 flex items-center justify-center text-2xl">‚ù§Ô∏è</div>
      </div>
    </div>

    <!-- Card 3: Sleep Hours -->
    <div class="stat-card bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Sleep Hours <span class="ml-1">üò¥</span></p>
          <p class="text-white text-3xl font-bold mt-2">7.2 hrs</p>
          <p class="text-purple-400 text-xs mt-2">Optimal</p>
        </div>
        <div class="bg-purple-500/20 rounded-lg p-3 flex items-center justify-center text-2xl">üò¥</div>
      </div>
    </div>

    <!-- Card 4: Steps -->
    <div class="stat-card bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Steps <span class="ml-1">üëü</span></p>
          <p class="text-white text-3xl font-bold mt-2">8,500</p>
          <p class="text-yellow-400 text-xs mt-2">Active</p>
        </div>
        <div class="bg-yellow-500/20 rounded-lg p-3 flex items-center justify-center text-2xl">üëü</div>
      </div>
    </div>
  </div>

  <!-- Data Tables Section -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
    <!-- Previous Health Records -->
    <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl content-card">
      <h2 class="text-lg font-semibold text-white mb-4">Previous Health Records</h2>
      <div class="space-y-4">
        <div class="flex items-center justify-between py-3 border-b border-gray-700/30">
          <div>
            <p class="text-white text-sm">Blood Pressure: 120/80 mmHg</p>
            <p class="text-gray-500 text-xs">Today, 8:00 AM</p>
          </div>
          <span class="bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-xs">Normal</span>
        </div>
        <div class="flex items-center justify-between py-3 border-b border-gray-700/30">
          <div>
            <p class="text-white text-sm">Heart Rate: 76 bpm</p>
            <p class="text-gray-500 text-xs">Yesterday, 9:30 PM</p>
          </div>
          <span class="bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs">Good</span>
        </div>
        <div class="flex items-center justify-between py-3 border-b border-gray-700/30">
          <div>
            <p class="text-white text-sm">Sleep Duration: 7.2 hrs</p>
            <p class="text-gray-500 text-xs">Yesterday, 7:00 AM</p>
          </div>
          <span class="bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-xs">Optimal</span>
        </div>
        <div class="flex items-center justify-between py-3 border-b border-gray-700/30">
          <div>
            <p class="text-white text-sm">Blood Sugar: 98 mg/dL</p>
            <p class="text-gray-500 text-xs">2 days ago, 7:30 AM</p>
          </div>
          <span class="bg-pink-500/20 text-pink-400 px-3 py-1 rounded-full text-xs">Stable</span>
        </div>
        <div class="flex items-center justify-between py-3">
          <div>
            <p class="text-white text-sm">Activity: 8,500 steps</p>
            <p class="text-gray-500 text-xs">2 days ago, 9:00 PM</p>
          </div>
          <span class="bg-yellow-500/20 text-yellow-400 px-3 py-1 rounded-full text-xs">Active</span>
        </div>
      </div>
    </div>

    <!-- User Health Condition - Centered -->
    <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl lg:col-span-1 content-card">
      <h2 class="text-lg font-semibold text-white mb-6">User Health Condition</h2>
      <div class="space-y-6">
        
        <!-- Health Metric 1: Physical Health -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-white text-sm font-medium">Physical Health</label>
            <span class="text-indigo-400 text-sm font-semibold" id="physical-value">78%</span>
          </div>
          <div class="w-full bg-gray-700/30 rounded-full h-3 overflow-hidden">
            <div id="physical-bar" class="bg-gradient-to-r from-indigo-400 to-indigo-600 h-3 rounded-full transition-all duration-300" style="width: 78%"></div>
          </div>
          <input id="physical-input" type="range" min="0" max="100" value="78" class="w-full mt-2 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-indigo-500" />
        </div>

        <!-- Health Metric 2: Mental Health -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-white text-sm font-medium">Mental Health</label>
            <span class="text-green-400 text-sm font-semibold" id="mental-value">85%</span>
          </div>
          <div class="w-full bg-gray-700/30 rounded-full h-3 overflow-hidden">
            <div id="mental-bar" class="bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full transition-all duration-300" style="width: 85%"></div>
          </div>
          <input id="mental-input" type="range" min="0" max="100" value="85" class="w-full mt-2 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-green-500" />
        </div>

        <!-- Health Metric 3: Sleep Quality -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-white text-sm font-medium">Sleep Quality</label>
            <span class="text-purple-400 text-sm font-semibold" id="sleep-value">72%</span>
          </div>
          <div class="w-full bg-gray-700/30 rounded-full h-3 overflow-hidden">
            <div id="sleep-bar" class="bg-gradient-to-r from-purple-400 to-purple-600 h-3 rounded-full transition-all duration-300" style="width: 72%"></div>
          </div>
          <input id="sleep-input" type="range" min="0" max="100" value="72" class="w-full mt-2 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500" />
        </div>

        <!-- Health Metric 4: Stress Level (Inverse) -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-white text-sm font-medium">Stress Level (Lower is Better)</label>
            <span class="text-red-400 text-sm font-semibold" id="stress-value">35%</span>
          </div>
          <div class="w-full bg-gray-700/30 rounded-full h-3 overflow-hidden">
            <div id="stress-bar" class="bg-gradient-to-r from-red-400 to-red-600 h-3 rounded-full transition-all duration-300" style="width: 35%"></div>
          </div>
          <input id="stress-input" type="range" min="0" max="100" value="35" class="w-full mt-2 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-red-500" />
        </div>

        <!-- Health Metric 5: Activity Level -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-white text-sm font-medium">Activity Level</label>
            <span class="text-yellow-400 text-sm font-semibold" id="activity-value">68%</span>
          </div>
          <div class="w-full bg-gray-700/30 rounded-full h-3 overflow-hidden">
            <div id="activity-bar" class="bg-gradient-to-r from-yellow-400 to-yellow-600 h-3 rounded-full transition-all duration-300" style="width: 68%"></div>
          </div>
          <input id="activity-input" type="range" min="0" max="100" value="68" class="w-full mt-2 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500" />
        </div>

        <!-- Overall Health Score -->
        <div class="mt-8 pt-6 border-t border-gray-700/30">
          <div class="flex items-center justify-between mb-3">
            <label class="text-white text-sm font-medium">Overall Health Score</label>
            <span class="text-green-400 text-lg font-bold" id="overall-score">77.6%</span>
          </div>
          <div class="w-full bg-gray-700/30 rounded-full h-4 overflow-hidden">
            <div id="overall-bar" class="bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-300" style="width: 77.6%"></div>
          </div>
          <p class="text-gray-400 text-xs mt-2">Average of all health metrics</p>
        </div>
      </div>
    </div>

    <!-- Chat Command Box -->
    <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl content-card">
      <h2 class="text-lg font-semibold text-white mb-4">Chat Assistant</h2>
      <div class="flex gap-2">
        <input id="chat-search-input" type="text" placeholder="Ask me anything..." class="flex-1 bg-gray-700/30 text-white placeholder-gray-500 rounded-lg px-4 py-3 border border-gray-700/50 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        <button id="chat-open-btn" class="bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-400 px-6 py-3 rounded-lg transition font-semibold">
          <svg viewBox="0 0 24 24" fill="currentColor" class="size-6">
            <path d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 L4.13399899,1.16414422 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.837654326,3.0486314 1.15159189,3.99021575 L3.03521743,10.4312088 C3.03521743,10.5883061 3.19218622,10.7454035 3.50612381,10.7454035 L16.6915026,11.5308905 C16.6915026,11.5308905 17.1624089,11.5308905 17.1624089,12.0021827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-xl content-card">
        <style>
          @keyframes fade-in {
            0% { opacity: 0; transform: translateY(40px); }
            100% { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in { animation: fade-in 1s cubic-bezier(0.4,0,0.2,1) both; }
          @keyframes fade-in-up {
            0% { opacity: 0; transform: translateY(60px); }
            100% { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in-up { animation: fade-in-up 1.2s cubic-bezier(0.4,0,0.2,1) both; }
          @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
          }
          .animate-bounce-slow { animation: bounce-slow 2.5s infinite; }
        </style>
    <h2 class="text-lg font-semibold text-white mb-6">Quick Actions</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <button class="bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-400 px-4 py-3 rounded-lg transition">
        <svg viewBox="0 0 24 24" fill="currentColor" class="size-6 mx-auto mb-2">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
        </svg>
        <p class="text-sm font-semibold">Add User</p>
      </button>
      <button class="bg-green-500/20 hover:bg-green-500/30 text-green-400 px-4 py-3 rounded-lg transition">
        <svg viewBox="0 0 24 24" fill="currentColor" class="size-6 mx-auto mb-2">
          <path d="M19 12h-2v-2h-2v2h-2v2h2v2h2v-2h2v-2zM7 9h10V7H7v2zm10 6H7v2h10v-2z" />
        </svg>
        <p class="text-sm font-semibold">Generate Report</p>
      </button>
      <button class="bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 px-4 py-3 rounded-lg transition">
        <svg viewBox="0 0 24 24" fill="currentColor" class="size-6 mx-auto mb-2">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
        </svg>
        <p class="text-sm font-semibold">Settings</p>
      </button>
      <button class="bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 px-4 py-3 rounded-lg transition">
        <svg viewBox="0 0 24 24" fill="currentColor" class="size-6 mx-auto mb-2">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
        </svg>
        <p class="text-sm font-semibold">View Docs</p>
      </button>
    </div>
  </div>
</div>

<!-- Floating Chatbot Button -->
<button id="floating-chat-btn" class="fixed bottom-8 right-8 bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all duration-300 z-40">
  <svg viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
  </svg>
</button>

<!-- Chat Modal -->
<div id="chat-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-end sm:justify-end">
  <div class="bg-gray-900 rounded-lg shadow-xl w-full sm:w-96 h-screen sm:h-[600px] flex flex-col border border-gray-700/50 sm:mr-8 sm:mb-8">
    <!-- Chat Header -->
    <div class="bg-gradient-to-r from-indigo-500 to-indigo-600 px-6 py-4 rounded-t-lg flex items-center justify-between">
      <h3 class="text-white font-semibold flex items-center gap-2">
        <svg viewBox="0 0 24 24" fill="currentColor" class="size-5">
          <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
        </svg>
        Chat Assistant
      </h3>
      <button id="close-chat-btn" class="text-white hover:text-gray-200 transition">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="size-6">
          <path d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Chat Messages -->
    <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4">
      <div class="flex justify-start">
        <div class="bg-gray-800 text-gray-200 px-4 py-2 rounded-lg max-w-xs">
          <p class="text-sm">Hi! I'm your assistant. How can I help you today?</p>
        </div>
      </div>
    </div>

    <!-- Chat Input -->
    <div class="border-t border-gray-700/50 p-4">
      <div class="flex gap-2">
        <input id="modal-chat-input" type="text" placeholder="Type your message..." class="flex-1 bg-gray-800 text-white placeholder-gray-500 rounded-lg px-3 py-2 border border-gray-700/50 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm" />
        <button id="send-chat-btn" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg transition">
          <svg viewBox="0 0 24 24" fill="currentColor" class="size-5">
            <path d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 L4.13399899,1.16414422 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.837654326,3.0486314 1.15159189,3.99021575 L3.03521743,10.4312088 C3.03521743,10.5883061 3.19218622,10.7454035 3.50612381,10.7454035 L16.6915026,11.5308905 C16.6915026,11.5308905 17.1624089,11.5308905 17.1624089,12.0021827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="border-t border-gray-700/50 bg-gray-800/30 mt-16">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
      <!-- Company Info -->
      <div>
        <div class="flex items-center mb-4">
          <img src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=500" alt="Your Company" class="h-8 w-auto" />
          <span class="ml-2 text-white font-semibold">Dashboard</span>
        </div>
        <p class="text-gray-400 text-sm">Your comprehensive analytics and health monitoring platform.</p>
      </div>

      <!-- Product Links -->
      <div>
        <h3 class="text-white font-semibold mb-4">Product</h3>
        <ul class="space-y-2">
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Features</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Pricing</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Security</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Roadmap</a></li>
        </ul>
      </div>

      <!-- Company Links -->
      <div>
        <h3 class="text-white font-semibold mb-4">Company</h3>
        <ul class="space-y-2">
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">About</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Blog</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Careers</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Contact</a></li>
        </ul>
      </div>

      <!-- Legal Links -->
      <div>
        <h3 class="text-white font-semibold mb-4">Legal</h3>
        <ul class="space-y-2">
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Privacy</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Terms</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">Cookies</a></li>
          <li><a href="#" class="text-gray-400 hover:text-white text-sm transition">License</a></li>
        </ul>
      </div>
    </div>

    <!-- Divider -->
    <div class="border-t border-gray-700/50 pt-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <!-- Social Links -->
        <div class="flex space-x-6 mb-4 md:mb-0">
          <a href="#" class="text-gray-400 hover:text-white transition">
            <svg class="size-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M8.29 20v-7.1h-2.37V9.4h2.37V7.57c0-2.33 1.43-3.6 3.5-3.6 1 0 1.85.07 2.1.1v2.43h-1.44c-1.13 0-1.35.54-1.35 1.32V9.4h2.7l-.35 3.5h-2.35V20h-2.88z" />
            </svg>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition">
            <svg class="size-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2s9 5 20 5a9.5 9.5 0 00-9-5.5c4.75 2.25 10.42.2 12.6-7.14a4.5 4.5 0 00.08-.5" />
            </svg>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition">
            <svg class="size-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.834 8.207 11.437.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v 3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
            </svg>
          </a>
        </div>

        <!-- Copyright -->
        <div class="text-gray-500 text-sm">
          <p>&copy; 2026 Dashboard Analytics. All rights reserved.</p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>

  // Animated Hamburger Menu Toggle
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  let menuOpen = false;
  mobileMenuBtn.addEventListener('click', function() {
    menuOpen = !menuOpen;
    mobileMenu.classList.toggle('hidden');
    if (menuOpen) {
      mobileMenuBtn.classList.add('open');
    } else {
      mobileMenuBtn.classList.remove('open');
    }
  });

  // Profile dropdown toggle (floating)
  const profileBtn = document.getElementById('profile-btn');
  const profileMenu = document.getElementById('profile-menu');
  profileBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    profileMenu.classList.toggle('hidden');
  });
  document.addEventListener('click', function(event) {
    if (!profileBtn.contains(event.target) && !profileMenu.contains(event.target)) {
      profileMenu.classList.add('hidden');
    }
  });

  // Health Metrics Update Functionality
  const healthInputs = {
    physical: document.getElementById('physical-input'),
    mental: document.getElementById('mental-input'),
    sleep: document.getElementById('sleep-input'),
    stress: document.getElementById('stress-input'),
    activity: document.getElementById('activity-input')
  };

  const healthBars = {
    physical: document.getElementById('physical-bar'),
    mental: document.getElementById('mental-bar'),
    sleep: document.getElementById('sleep-bar'),
    stress: document.getElementById('stress-bar'),
    activity: document.getElementById('activity-bar')
  };

  const healthValues = {
    physical: document.getElementById('physical-value'),
    mental: document.getElementById('mental-value'),
    sleep: document.getElementById('sleep-value'),
    stress: document.getElementById('stress-value'),
    activity: document.getElementById('activity-value')
  };

  function updateHealthScore() {
    const physicalVal = parseInt(healthInputs.physical.value);
    const mentalVal = parseInt(healthInputs.mental.value);
    const sleepVal = parseInt(healthInputs.sleep.value);
    const stressVal = parseInt(healthInputs.stress.value);
    const activityVal = parseInt(healthInputs.activity.value);

    // Calculate overall score (stress is inverse, so 100 - stress)
    const overall = (physicalVal + mentalVal + sleepVal + (100 - stressVal) + activityVal) / 5;

    document.getElementById('overall-score').textContent = overall.toFixed(1) + '%';
    document.getElementById('overall-bar').style.width = overall + '%';

    // Change color based on score
    const overallScoreElement = document.getElementById('overall-score');
    const overallBar = document.getElementById('overall-bar');
    
    if (overall < 40) {
      // Red - Poor Health
      overallScoreElement.className = 'text-red-400 text-lg font-bold';
      overallBar.className = 'bg-gradient-to-r from-red-400 to-red-600 h-4 rounded-full transition-all duration-300';
    } else if (overall < 60) {}
  let mouseY = window.innerHeight / 2;

  document.addEventListener('mousemove', function(e) {
    mouseX = e.clientX;
    mouseY = e.clientY + window.scrollY;

    squareGrid.forEach(item => {
      const dx = mouseX - item.x;
      const dy = mouseY - item.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      item.distance = distance;

      const maxDistance = 300;
      const influence = Math.max(0, 1 - distance / maxDistance);

      item.element.style.opacity = 0.15 + influence * 0.4;
      
      if (influence > 0.1) {
        item.element.style.boxShadow = `0 0 ${20 + influence * 20}px rgba(99, 102, 241, ${0.3 + influence * 0.5})`;
        item.element.style.transform = `scale(${1 + influence * 0.2})`;
      } else {
        item.element.style.boxShadow = '0 0 20px rgba(99, 102, 241, 0)';
        item.element.style.transform = 'scale(1)';
      }
    });
  });

  // Handle window resize
  window.addEventListener('resize', function() {
    bgSquares.innerHTML = '';
    squareGrid.length = 0;
    createSquareGrid();
  });

  // Initialize squares on load
  createSquareGrid();

  // Chatbot Functionality
  const floatingChatBtn = document.getElementById('floating-chat-btn');
  const chatModal = document.getElementById('chat-modal');
  const closeChatBtn = document.getElementById('close-chat-btn');
  const chatOpenBtn = document.getElementById('chat-open-btn');
  const chatSearchInput = document.getElementById('chat-search-input');
  const modalChatInput = document.getElementById('modal-chat-input');
  const sendChatBtn = document.getElementById('send-chat-btn');
  const chatMessages = document.getElementById('chat-messages');

  // Open chat from floating button
  floatingChatBtn.addEventListener('click', function() {
    chatModal.classList.remove('hidden');
    modalChatInput.focus();
  });

  // Open chat from command box
  chatOpenBtn.addEventListener('click', function() {
    if (chatSearchInput.value.trim()) {
      chatModal.classList.remove('hidden');
      modalChatInput.value = chatSearchInput.value;
      chatSearchInput.value = '';
      handleChatMessage(modalChatInput.value);
      modalChatInput.focus();
    } else {
      chatModal.classList.remove('hidden');
      modalChatInput.focus();
    }
  });

  // Close chat modal
  closeChatBtn.addEventListener('click', function() {
    chatModal.classList.add('hidden');
  });

  // Close modal when clicking outside
  chatModal.addEventListener('click', function(event) {
    if (event.target === chatModal) {
      chatModal.classList.add('hidden');
    }
  });

  // Send message from modal
  sendChatBtn.addEventListener('click', function() {
    const message = modalChatInput.value.trim();
    if (message) {
      handleChatMessage(message);
      modalChatInput.value = '';
      modalChatInput.focus();
    }
  });

  // Send message on Enter key
  modalChatInput.addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      const message = modalChatInput.value.trim();
      if (message) {
        handleChatMessage(message);
        modalChatInput.value = '';
      }
    }
  });

  // Chat search on Enter key
  chatSearchInput.addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      chatOpenBtn.click();
    }
  });

  function handleChatMessage(userMessage) {
    // Add user message
    const userDiv = document.createElement('div');
    userDiv.className = 'flex justify-end';
    userDiv.innerHTML = `<div class="bg-indigo-600 text-white px-4 py-2 rounded-lg max-w-xs">
      <p class="text-sm">${userMessage}</p>
    </div>`;
    chatMessages.appendChild(userDiv);

    // Redirect to chat page after first message
    if (chatMessages.children.length === 2) {
      // 1 initial bot message + 1 user message = 2 children
      setTimeout(() => {
        window.location.href = 'chat.html?message=' + encodeURIComponent(userMessage);
      }, 300);
    }

    // Simulate bot response
    setTimeout(() => {
      const botDiv = document.createElement('div');
      botDiv.className = 'flex justify-start';
      
      let botResponse = '';
      const lowerMessage = userMessage.toLowerCase();

      if (lowerMessage.includes('health') || lowerMessage.includes('score')) {
        botResponse = 'Your overall health score is 77.6% which is excellent! Keep up the great work. You can adjust your health metrics in the dashboard above to see real-time changes.';
      } else if (lowerMessage.includes('dashboard') || lowerMessage.includes('home')) {
        botResponse = 'You can navigate back to the main dashboard by clicking the Dashboard link in the navigation menu at the top of the page.';
      } else if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
        botResponse = 'I can help you with health metrics, analytics, reports, and navigation. Feel free to ask me anything!';
      } else if (lowerMessage.includes('activity') || lowerMessage.includes('recent')) {
        botResponse = 'Your recent activity shows various user registrations, payments, and system updates. Check the Recent Activity panel to see all your latest events.';
      } else if (lowerMessage.includes('settings') || lowerMessage.includes('preference')) {
        botResponse = 'You can access settings from the navigation menu at the top. Click on Settings to customize your preferences.';
      } else {
        botResponse = 'That\'s a great question! I\'m here to help you navigate the dashboard and understand your health metrics. Is there anything specific you\'d like to know?';
      }

      botDiv.innerHTML = `<div class="bg-gray-800 text-gray-200 px-4 py-2 rounded-lg max-w-xs">
        <p class="text-sm">${botResponse}</p>
      </div>`;
      chatMessages.appendChild(botDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }, 500);

    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
</script>
</body>
</html>